# Расчет подсетей IPv4

## Оглавление
- [Задачи](#задачи)
- [Общие сведения/сценарий](#общие-сведениясценарий)
- [Решение](#решение)
  - [Проблема 1](#проблема-1)
  - [Проблема 2](#проблема-2)
  - [Проблема 3](#проблема-3)
  - [Проблема 4](#проблема-4)
  - [Проблема 5](#проблема-5)
  - [Проблема 6](#проблема-6)
- [Вопрос для повторения](#вопрос-для-повторения)
## Задачи
- Часть 1. Определение подсетей по IPv4-адресу<br>
- Часть 2. Расчет подсетей по IPv4-адресу

## Общие сведения/сценарий
Умение работать с IPv4-подсетями и определять информацию о сетях и узлах на основе известного IP-адреса и маски подсети необходимо для понимания принципов работы IPv4-сетей. Цель первой части — закрепить знания о том, как рассчитывать IP-адрес сети на основе известного IP-адреса и маски подсети. Зная IP-адрес и маску подсети, вы всегда сможете получить другие данные об этой подсети.

## Решение
### Проблема 1

|Дано:||
|-----------------------|---------------|
|IP-адрес узла|192.168.200.139|
|Исходная маска подсети|255.255.255.0|
|Новая маска подсети|255.255.255.224|

|Найти:||
|-------------------------------------------|---------------|
|Количество бит подсети|3 бита|
|Количество созданных подсетей|8 подсетей|
|Количество бит узлов в подсети|5 бит|
|Количество узлов в подсети|30 узлов|
|Сетевой адрес этой подсети|192.168.200.128|
|IPv4-адрес первого узла в этой подсети|192.168.200.129|
|IPv4-адрес последнего узла в этой подсети|192.168.200.158|	
|Широковещательный IPv4-адрес в этой подсети|192.168.200.159|

Решение:
1. Количество бит подсети
    - Переводим исходную и новую маски в двоичный вид:<br>
      **255.255.255.0&nbsp;&nbsp;&nbsp;&nbsp; = 11111111.11111111.11111111.00000000 (24 бита)**<br>
      **255.255.225.224 = 11111111.11111111.11111111.11100000 (27 бит)**
    - Находим кол-во бит подсети, для этого нужно вычислить модуль разницы кол-ва бит новой и исходной масок:<br>
      **|24-27|=3 бита**
2. Количество созданных подсетей<br>
   Чтобы найти кол-во созданных подсетей возводим двойку в степень, равной кол-ву бит подсети:<br>
   **2^3=8 подсетей**
3. Количество бит узлов в подсети<br>
   Кол-во бит узлов в подсети можно найти через разницу максимального кол-ва бит в ipv4-адресе (32) и кол-во бит в новой маске (27):<br>
   **32-27=5 бит**
4. Количество узлов в подсети<br>
   Кол-во узлов сети находим через возведение двойки в степень, равную кол-ву бит узлов, но нужно не забыть вычесть из результата двойку (сетевой и бродкаст адреса):<br>
   **2^5-2=30 узлов**
5. Сетевой адрес этой подсети<br>
   - Переведём IP-адрес узла в двоичный вид:<br>
     192.168.200.139 = 11000000.10101000.11001000.10001011
   - Наложим на него новую, ранее найденную, маску сети (если точнее, то выполним побитовое И):<br>
     **11000000.10101000.11001000.10001011**<br>
     **AND**<br>
     **11111111.11111111.11111111.11100000**<br>
     **=**<br>
     **11000000.10101000.11001000.10000000**
   - Переводим результат операции в десячиный вид:<br>
     **11000000.10101000.11001000.10000000 = 192.168.200.128**
6. IPv4-адрес первого узла в этой подсети<br>
   Чтобы найти адрес первого узла подсети достаточно просто увеличить на единицу последний октет сетевого адреса подсети:<br>
   **192.168.200.(128+1) = 192.168.200.129**
7. IPv4-адрес последнего узла в этой подсети<br>
   Чтобы найти адрес последнего узла сети, увеличим последний октет адреса сети на кол-во узлов в подсети:<br>
   **192.168.200.(128+30) = 192.168.200.158**
8. Широковещательный IPv4-адрес в этой подсети<br>
   Чтобы найти широковещательный адрес подсети, увеличим последний октет адреса последнего узла на единицу:<br>
   **192.168.200.(158+1) = 192.168.200.159**

### Проблема 2

|Дано:||
|-----------------------|---------------|
|IP-адрес узла|10.101.99.228|
|Исходная маска подсети|255.0.0.0|
|Новая маска подсети|255.255.128.0|

|Найти:||
|-------------------------------------------|---------------|
|Количество бит подсети|9 бит|
|Количество созданных подсетей|512 подсетей|
|Количество бит узлов в подсети|15 бит|
|Количество узлов в подсети|32766 узлов|
|Сетевой адрес этой подсети|10.101.0.0|
|IPv4-адрес первого узла в этой подсети|10.101.0.1|
|IPv4-адрес последнего узла в этой подсети|10.101.127.254|	
|Широковещательный IPv4-адрес в этой подсети|10.101.127.255|

Решение:
1. Количество бит подсети
    - Переводим исходную и новую маски в двоичный вид:<br>
      **255.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 11111111.00000000.00000000.00000000 (8 бит)**<br>
      **255.255.128.0 = 11111111.11111111.10000000.00000000 (17 бит)**
    - Находим кол-во бит подсети, для этого нужно вычислить модуль разницы кол-ва бит новой и исходной масок:<br>
      **|8-17|=9 бит**
2. Количество созданных подсетей<br>
   Чтобы найти кол-во созданных подсетей возводим двойку в степень, равной кол-ву бит подсети:<br>
   **2^9=512 подсетей**
3. Количество бит узлов в подсети<br>
   Кол-во бит узлов в подсети можно найти через разницу максимального кол-ва бит в ipv4-адресе (32) и кол-во бит в новой маске (17):<br>
   **32-17=15 бит**
4. Количество узлов в подсети<br>
   Кол-во узлов сети находим через возведение двойки в степень, равную кол-ву бит узлов, но нужно не забыть вычесть из результата двойку (сетевой и бродкаст адреса):<br>
   **2^15-2=32766 узлов**
5. Сетевой адрес этой подсети<br>
   - Переведём IP-адрес узла в двоичный вид<br>
     **10.101.99.228 = 00001010.01100101.01100011.11100100**
   - Наложим на него новую, ранее найденную, маску сети (если точнее, то выполним побитовое И):<br>
     **00001010.01100101.01100011.11100100**<br>
     **AND**<br>
     **11111111.11111111.10000000.00000000**<br>
     **=**<br>
     **00001010.01100101.00000000.00000000**
   - Переводим результат операции в десячиный вид:<br>
     **00001010.01100101.00000000.00000000 = 10.101.0.0**
6. IPv4-адрес первого узла в этой подсети<br>
   Чтобы найти адрес первого узла подсети достаточно просто увеличить на единицу последний октет сетевого адреса подсети:<br>
   **10.101.0(0+1) = 10.101.0.1**
7. Широковещательный IPv4-адрес в этой подсети<br>
   - Инвертируем маску сети (находим Wildcard):<br>
     **11111111.11111111.10000000.00000000 -> 00000000.00000000.01111111.11111111**
   - Накладываем инвертированную маску на адрес сети:<br>
     **00001010.01100101.00000000.10000000**<br>
     **OR**<br>
     **00000000.00000000.01111111.11111111**<br>
     **=**<br>
     **00001010.01100101.01111111.11111111**
   - Переводим в десячиный формат:<br>
     **00001010.01100101.01111111.11111111 = 10.101.127.255**
8. IPv4-адрес последнего узла в этой подсети<br>
   Чтобы найти адрес последнего узла сети, вычтем единицу из последнего октета широковещательного адреса сети:<br>
   **110.101.127.(255-1) = 10.101.127.254**

### Проблема 3

|Дано:||
|-----------------------|---------------|
|IP-адрес узла|172.22.32.12|
|Исходная маска подсети|255.255.0.0|
|Новая маска подсети|255.255.224.0|

|Найти:||
|-------------------------------------------|---------------|
|Количество бит подсети|3 бита|
|Количество созданных подсетей|8 подсетей|
|Количество бит узлов в подсети|13 бит|
|Количество узлов в подсети|8190 узлов|
|Сетевой адрес этой подсети|172.22.32.0|
|IPv4-адрес первого узла в этой подсети|172.22.32.1|
|IPv4-адрес последнего узла в этой подсети|172.22.63.254|	
|Широковещательный IPv4-адрес в этой подсети|172.22.63.255|

Решение:
1. Количество бит подсети
    - Переводим исходную и новую маски в двоичный вид:<br>
      **255.255.0.0&nbsp;&nbsp;&nbsp;&nbsp; = 11111111.11111111.00000000.00000000 (16 бит)**<br>
      **255.255.224.0 = 11111111.11111111.11100000.00000000 (19 бит)**
    - Находим кол-во бит подсети, для этого нужно вычислить модуль разницы кол-ва бит новой и исходной масок:<br>
      **|16-19|=3 бита**
2. Количество созданных подсетей<br>
   Чтобы найти кол-во созданных подсетей возводим двойку в степень, равной кол-ву бит подсети:<br>
   **2^3=8 подсетей**
3. Количество бит узлов в подсети<br>
   Кол-во бит узлов в подсети можно найти через разницу максимального кол-ва бит в ipv4-адресе (32) и кол-во бит в новой маске (19):<br>
   **32-19=13 бит**
4. Количество узлов в подсети<br>
   Кол-во узлов сети находим через возведение двойки в степень, равную кол-ву бит узлов, но нужно не забыть вычесть из результата двойку (сетевой и бродкаст адреса):<br>
   **2^13-2=8190 узлов**
5. Сетевой адрес этой подсети<br>
   - Переведём IP-адрес узла в двоичный вид<br>
     **172.22.32.12 = 10101100.00010110.00100000.00001100**
   - Наложим на него новую, ранее найденную, маску сети (если точнее, то выполним побитовое И):<br>
     **10101100.00010110.00100000.00001100**<br>
     **AND**<br>
     **11111111.11111111.11100000.00000000**<br>
     **=**<br>
     **10101100.00010110.00100000.00000000**
   - Переводим результат операции в десячиный вид:<br>
     **10101100.00010110.00100000.00000000 = 172.22.32.0**
6. IPv4-адрес первого узла в этой подсети<br>
   Чтобы найти адрес первого узла подсети достаточно просто увеличить на единицу последний октет сетевого адреса подсети:<br>
   **172.22.32.(0+1) = 172.22.32.1**
7. Широковещательный IPv4-адрес в этой подсети<br>
   - Инвертируем маску сети (находим Wildcard):<br>
     **11111111.11111111.11100000.00000000 -> 00000000.00000000.00011111.11111111**
   - Накладываем инвертированную маску на адрес сети:<br>
     **10101100.00010110.00100000.00000000**<br>
     **OR**<br>
     **00000000.00000000.00011111.11111111**<br>
     **=**<br>
     **10101100.00010110.00111111.11111111**
   - Переводим в десячиный формат:<br>
     **10101100.00010110.00111111.11111111 = 172.22.63.255**
8. IPv4-адрес последнего узла в этой подсети<br>
   Чтобы найти адрес последнего узла сети, вычтем единицу из последнего октета широковещательного адреса сети:<br>
   **172.22.63.(255-1) = 172.22.63.254**

### Проблема 4

|Дано:||
|-----------------------|---------------|
|IP-адрес узла|192.168.1.245|
|Исходная маска подсети|255.255.255.0|
|Новая маска подсети|255.255.255.252|

|Найти:||
|-------------------------------------------|---------------|
|Количество бит подсети|6 бит|
|Количество созданных подсетей|64 подсетей|
|Количество бит узлов в подсети|2 бит|
|Количество узлов в подсети|2 узла|
|Сетевой адрес этой подсети|192.168.1.244|
|IPv4-адрес первого узла в этой подсети|192.168.1.245|
|IPv4-адрес последнего узла в этой подсети|192.168.1.246|	
|Широковещательный IPv4-адрес в этой подсети|192.168.1.247|

Решение:
1. Количество бит подсети
    - Переводим исходную и новую маски в двоичный вид:<br>
      **255.255.255.0&nbsp;&nbsp;&nbsp;&nbsp; = 11111111.11111111.11111111.00000000 (24 бит)**<br>
      **255.255.255.252 = 11111111.11111111.11111111.11111100 (30 бит)**
    - Находим кол-во бит подсети, для этого нужно вычислить модуль разницы кол-ва бит новой и исходной масок:<br>
      **|24-30|=6 бит**
2. Количество созданных подсетей<br>
   Чтобы найти кол-во созданных подсетей возводим двойку в степень, равной кол-ву бит подсети:<br>
   **2^6=64 подсетей**
3. Количество бит узлов в подсети<br>
   Кол-во бит узлов в подсети можно найти через разницу максимального кол-ва бит в ipv4-адресе (32) и кол-во бит в новой маске (19):<br>
   **32-30=2 бита**
4. Количество узлов в подсети<br>
   Кол-во узлов сети находим через возведение двойки в степень, равную кол-ву бит узлов, но нужно не забыть вычесть из результата двойку (сетевой и бродкаст адреса):<br>
   **2^2-2=2 узла**
5. Сетевой адрес этой подсети<br>
   - Переведём IP-адрес узла в двоичный вид<br>
     **192.168.1.245 = 11000000.10101000.00000001.11110101**
   - Наложим на него новую, ранее найденную, маску сети (если точнее, то выполним побитовое И):<br>
     **11000000.10101000.00000001.11110101**<br>
     **AND**<br>
     **11111111.11111111.11111111.11111100**<br>
     **=**<br>
     **11000000.10101000.00000001.11110100**
   - Переводим результат операции в десячиный вид:<br>
     **11000000.10101000.00000001.11110100 = 192.168.1.244**
6. IPv4-адрес первого узла в этой подсети<br>
   Чтобы найти адрес первого узла подсети достаточно просто увеличить на единицу последний октет сетевого адреса подсети:<br>
   **192.168.1.(244+1) = 192.168.1.245**
7. IPv4-адрес последнего узла в этой подсети<br>
   Чтобы найти адрес последнего узла сети, прибавим кол-во узлов к последнему октету адреса сети:<br>
   **192.168.1.(244+2) = 192.168.1.246**
8. Широковещательный IPv4-адрес в этой подсети<br>
   Последний октет последнего адреса хоста сети +1:<br>
   **192.168.1.(246+1) = 192.168.1.247**

### Проблема 5

|Дано:||
|-----------------------|---------------|
|IP-адрес узла|128.107.0.55|
|Исходная маска подсети|255.255.0.0|
|Новая маска подсети|255.255.255.0|

|Найти:||
|-------------------------------------------|---------------|
|Количество бит подсети|8 бита|
|Количество созданных подсетей|256 подсетей|
|Количество бит узлов в подсети|8 бит|
|Количество узлов в подсети|254 узлов|
|Сетевой адрес этой подсети|128.107.0.0|
|IPv4-адрес первого узла в этой подсети|128.107.0.1|
|IPv4-адрес последнего узла в этой подсети|128.107.0.254|	
|Широковещательный IPv4-адрес в этой подсети|128.107.0.255|

Решение:
1. Количество бит подсети
    - Переводим исходную и новую маски в двоичный вид:<br>
      **255.255.0.0&nbsp;&nbsp;&nbsp;&nbsp; = 11111111.11111111.00000000.00000000 (16 бит)**<br>
      **255.255.255.0 = 11111111.11111111.11111111.00000000 (24 бита)**
    - Находим кол-во бит подсети, для этого нужно вычислить модуль разницы кол-ва бит новой и исходной масок:<br>
      **|16-24|=8 бит**
2. Количество созданных подсетей<br>
   Чтобы найти кол-во созданных подсетей возводим двойку в степень, равной кол-ву бит подсети:<br>
   **2^8=256 подсетей**
3. Количество бит узлов в подсети<br>
   Кол-во бит узлов в подсети можно найти через разницу максимального кол-ва бит в ipv4-адресе (32) и кол-во бит в новой маске (19):<br>
   **32-24=8 бит**
4. Количество узлов в подсети<br>
   Кол-во узлов сети находим через возведение двойки в степень, равную кол-ву бит узлов, но нужно не забыть вычесть из результата двойку (сетевой и бродкаст адреса):<br>
   **2^8-2=254 узла**
5. Сетевой адрес этой подсети<br>
   - Переведём IP-адрес узла в двоичный вид<br>
     **128.107.0.55 = 10000000.01101011.00000000.00110111**
   - Наложим на него новую, ранее найденную, маску сети (если точнее, то выполним побитовое И):<br>
     **10000000.01101011.00000000.00110111**<br>
     **AND**<br>
     **11111111.11111111.11111111.00000000**<br>
     **=**<br>
     **10000000.01101011.00000000.00000000**
   - Переводим результат операции в десячиный вид:<br>
     **10000000.01101011.00000000.00000000 = 128.107.0.0**
6. IPv4-адрес первого узла в этой подсети<br>
   Чтобы найти адрес первого узла подсети достаточно просто увеличить на единицу последний октет сетевого адреса подсети:<br>
   **128.107.0.(0+1) = 128.107.0.1**
7. Широковещательный IPv4-адрес в этой подсети<br>
   Так как у нас маска /24, то можем просто заменить последний октет с 0 на 255:
   **128.107.0.(0+255) = 128.107.0.255**<br>
8. IPv4-адрес последнего узла в этой подсети<br>
   Чтобы найти адрес последнего узла сети, вычтем единицу из последнего октета широковещательного адреса сети:<br>
   **128.107.0.(255-1) = 128.107.0.254**

### Проблема 6

|Дано:||
|-----------------------|---------------|
|IP-адрес узла|192.135.250.180|
|Исходная маска подсети|255.255.255.0|
|Новая маска подсети|255.255.255.248|

|Найти:||
|-------------------------------------------|---------------|
|Количество бит подсети|5 бит|
|Количество созданных подсетей|32 подсетей|
|Количество бит узлов в подсети|3 бита|
|Количество узлов в подсети|6 узла|
|Сетевой адрес этой подсети|192.135.250.176|
|IPv4-адрес первого узла в этой подсети|192.135.250.177|
|IPv4-адрес последнего узла в этой подсети|192.135.250.182|	
|Широковещательный IPv4-адрес в этой подсети|192.135.250.183|

Решение:
1. Количество бит подсети
    - Переводим исходную и новую маски в двоичный вид:<br>
      **255.255.255.0&nbsp;&nbsp;&nbsp;&nbsp; = 11111111.11111111.11111111.00000000 (24 бит)**<br>
      **255.255.255.248 = 11111111.11111111.11111111.11111000 (29 бит)**
    - Находим кол-во бит подсети, для этого нужно вычислить модуль разницы кол-ва бит новой и исходной масок:<br>
      **|24-29|=5 бит**
2. Количество созданных подсетей<br>
   Чтобы найти кол-во созданных подсетей возводим двойку в степень, равной кол-ву бит подсети:<br>
   **2^5=32 подсетей**
3. Количество бит узлов в подсети<br>
   Кол-во бит узлов в подсети можно найти через разницу максимального кол-ва бит в ipv4-адресе (32) и кол-во бит в новой маске (29):<br>
   **32-29=3 бита**
4. Количество узлов в подсети<br>
   Кол-во узлов сети находим через возведение двойки в степень, равную кол-ву бит узлов, но нужно не забыть вычесть из результата двойку (сетевой и бродкаст адреса):<br>
   **2^3-2=6 узлов**
5. Сетевой адрес этой подсети<br>
   - Переведём IP-адрес узла в двоичный вид<br>
     **192.135.250.180 = 11000000.10000111.11111010.10110100**
   - Наложим на него новую, ранее найденную, маску сети (если точнее, то выполним побитовое И):<br>
     **11000000.10000111.11111010.10110100**<br>
     **AND**<br>
     **11111111.11111111.11111111.11111000**<br>
     **=**<br>
     **11000000.10000111.11111010.10110000**
   - Переводим результат операции в десячиный вид:<br>
     **11000000.10000111.11111010.10110000 = 192.135.250.176**
6. IPv4-адрес первого узла в этой подсети<br>
   Чтобы найти адрес первого узла подсети достаточно просто увеличить на единицу последний октет сетевого адреса подсети:<br>
   **192.135.250.(176+1) = 192.135.250.177**
7. IPv4-адрес последнего узла в этой подсети<br>
   Чтобы найти адрес последнего узла сети, сложим последний октет адреса сети и кол-во хостов:<br>
   **192.135.250.(176+6) = 192.135.250.182**
8. Широковещательный IPv4-адрес в этой подсети<br>
   Последний октет последнего адреса хоста сети +1:<br>
   **192.135.250.(182+1) = 192.135.250.183**

## Вопрос для повторения
- Почему маска подсети так важна при анализе IPv4-адреса?<br>
Без маски подсети устройства не смогут понять границ подсети, в которой они находятся, так как маска строго разделяет IP-адрес на сетевую часть и узловую часть.